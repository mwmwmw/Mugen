{"version":3,"sources":["webpack://Mugen/webpack/bootstrap","webpack://Mugen/./src/constants.js","webpack://Mugen/./src/utils.js","webpack://Mugen/./src/chord.js","webpack://Mugen/./src/scale.js","webpack://Mugen/./src/melody.js","webpack://Mugen/./src/rhythm.js","webpack://Mugen/./src/generator.js","webpack://Mugen/./src/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","CHORD_SCALE_PATTERNS","PENTA","TRIAD","SUS2","SUS4","SEVENTH","NINTH","ELEVENTH","CHORD_SEMITONE_PATTERNS","MAJOR","MAJOR_1ST_INVERSION","MAJOR_2ND_INVERSION","MINOR","MINOR_1ST_INVERSION","MINOR_2ND_INVERSION","DIMINISHED","DIMINISHED_1ST_INVERSION","DIMINISHED_2ND_INVERSION","AUGMENTED","CHORD_PROGRESSIONS","I IV V V","I I IV V","I VI IV V","V IV I I","CANNON","SCALE_SIZE_IN_STEPS","WESTERN","PENTATONIC","HEXATONIC","SONG_PARTS","A","B","C","INTRO","OUTRO","check","probability","Math","random","countValue","arr","start","reduce","a","v","sort","b","shuffle","array","shuffledArray","slice","length","floor","utils_getRandom","atIndex","index","scale","chordScalePattern","chord","map","push","fromScale","chords","identify","keys","CHORD_IDENTITIES","sortedChord","filter","k","chordIdentity","matchChord","rootNote","bassNote","bassTranspose","rotateScale","steps","splice","concat","SCALE_PATTERNS","CHROMATIC","DORIAN","PHYGIAN","LYDIAN","MYXOLYDIAN","LOCRIAN","biggestSemitoneLeap","currentCount","octave","generateSemitonePattern","Array","fill","sum","refit","selector","generate","semitones","range","notes","fitsOctave","octaveRemainder","extractRawSemitonePattern","newNotes","undefined","reconstructScale","transposeNotes","amountInSemitones","transpose","note","amount","melody_generate","pattern","beat","gen","getRandom","filterRandomNotes","randomNote","mutatePattern","newPattern","rhythm_generate","beats","measure","sequence","pulse","syncopate","rhythm","generator_scale","octaves","progression","progs","CHORD_PROGREsSSIONS","prog","song","parts","melodicStructure","chordsA","melodyNotes","pickMelodyNotes","melodyNotes2","melody","part","bass","__webpack_exports__","generator_namespaceObject","chord_namespaceObject","scale_namespaceObject","utils_namespaceObject","melody_namespaceObject","rhythm_namespaceObject"],"mappings":"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","file":"js/main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","// patterns\r\nexport const CHORD_SCALE_PATTERNS = {\r\n  PENTA: [0, 2],\r\n  TRIAD: [0, 2, 4],\r\n  SUS2: [0, 1, 4],\r\n  SUS4: [0, 3, 4],\r\n  SEVENTH: [0, 2, 4, 6],\r\n  NINTH: [0, 2, 4, 6, 8],\r\n  ELEVENTH: [0, 2, 4, 6, 8, 10]\r\n};\r\n\r\n// identities\r\nexport const CHORD_SEMITONE_PATTERNS = {\r\n  MAJOR: [0, 4, 7],\r\n  MAJOR_1ST_INVERSION: [0, 5, 9],\r\n  MAJOR_2ND_INVERSION: [0, 3, 8],\r\n  MINOR: [0, 3, 7],\r\n  MINOR_1ST_INVERSION: [0, 4, 9],\r\n  MINOR_2ND_INVERSION: [0, 5, 8],\r\n  DIMINISHED: [0, 3, 6],\r\n  DIMINISHED_1ST_INVERSION: [0, 3, 9],\r\n  DIMINISHED_2ND_INVERSION: [0, 6, 9],\r\n  AUGMENTED: [0, 4, 8]\r\n}\r\n\r\nexport const CHORD_PROGRESSIONS = {\r\n  \"I IV V V\" : [0, 3, 4, 4],\r\n  \"I I IV V\" : [0, 0, 3, 4],\r\n  \"I VI IV V\" : [0, 5, 3, 4],\r\n  \"V IV I I\" : [4, 3, 0, 0],\r\n  \"CANNON\" : [0, 4, 5, 2, 3, 0, 3, 4]\r\n}\r\n\r\nexport const SEMITONES_IN_OCTAVE = 12;\r\n\r\nexport const MIDI_MIDDLE_C = 60;\r\n\r\nexport const DEFAULT_SCALE_RANGE = 24;\r\n\r\nexport const DEFAULT_PATTERN_LENGTH = 16;\r\n\r\nexport const MAJOR = [2,2,1,2,2,2,1];\r\n\r\nexport const SCALE_SIZE_IN_STEPS = {\r\n  WESTERN: 7,\r\n  PENTATONIC: 5,\r\n  HEXATONIC: 6,\r\n}\r\n\r\nexport const BEATS = 4;\r\nexport const MEASURES = 4;\r\n\r\nexport const SONG_PARTS = {\r\n  A: \"A\",\r\n  B: \"B\",\r\n  C: \"C\",\r\n  INTRO: \"INTRO\",\r\n  OUTRO: \"OUTRO\"\r\n};","export const check = probability => Math.random() < probability;\r\n\r\nexport const countValue = (arr, value = true, start = 0) => {\r\n  return arr.reduce((a, v) => (v === value ? a + 1 : a), start);\r\n};\r\n\r\nexport const sort = (a, b) => a - b;\r\n\r\nexport const shuffle = (array) => {\r\n  let shuffledArray = array.slice();\r\n  var m = shuffledArray.length, t, i;\r\n  while (m) {\r\n    i = Math.floor(Math.random() * m--);\r\n    t = shuffledArray[m];\r\n    shuffledArray[m] = shuffledArray[i];\r\n    shuffledArray[i] = t;\r\n  }\r\n  return shuffledArray;\r\n}\r\n\r\nexport const getRandom = (array) => {\r\n    return array[Math.floor(Math.random()*array.length)];\r\n}","import {\r\n    CHORD_SCALE_PATTERNS,\r\n    CHORD_SEMITONE_PATTERNS,\r\n} from \"./constants\"\r\n\r\nimport {\r\n    sort\r\n} from \"./utils\"\r\n\r\nexport const atIndex = (index, scale, chordScalePattern = CHORD_SCALE_PATTERNS.TRIAD) => {\r\n    let chord = [];\r\n    chordScalePattern.map((p) => { \r\n        chord.push(scale[(index + p) % scale.length])\r\n    })\r\n    return chord;\r\n} \r\n\r\n\r\nexport const fromScale = (scale, chordScalePattern = CHORD_SCALE_PATTERNS.TRIAD) => {\r\n    let chords = [];\r\n    scale.map((v, i) => {\r\n        chords.push(atIndex(i, scale, chordScalePattern))\r\n    });\r\n    return chords;\r\n}\r\n\r\nexport const identify = (chord) => {\r\n    let keys = Object.keys(CHORD_IDENTITIES);\r\n    let sortedChord = chord.slice().sort(sort);\r\n    return keys.filter(k => {\r\n        let chordIdentity = CHORD_IDENTITIES[k].slice();\r\n        return matchChord(sortedChord, chordIdentity)\r\n    })\r\n}\r\n\r\nexport const matchChord = (chord, chordIdentity = CHORD_SEMITONE_PATTERNS.MAJOR) => {\r\n    let rootNote = chord[0]\r\n    let id = chordIdentity.filter((n, i) => {\r\n        return n === (chord[i] - rootNote);\r\n    })\r\n    return id.length === chordIdentity.length;\r\n}\r\n\r\nexport const bassNote = (chord, bassTranspose = -24) => {\r\n    return chord.sort(sort)[0] + bassTranspose;\r\n}","export const rotateScale = (scale, steps) => {\r\n  let array = scale.slice();\r\n  return array.splice(steps, array.length).concat(array.splice(0, steps));\r\n}\r\n\r\nimport {\r\n  SEMITONES_IN_OCTAVE,\r\n  SCALE_SIZE_IN_STEPS,\r\n  MIDI_MIDDLE_C,\r\n  DEFAULT_SCALE_RANGE,\r\n  MAJOR,\r\n} from \"./constants\"\r\n\r\nexport const SCALE_PATTERNS = {\r\n  CHROMATIC: [1,1,1,1,1,1,1,1,1,1,1,1],\r\n  MAJOR: MAJOR,\r\n  DORIAN: rotateScale(MAJOR,1),\r\n  PHYGIAN: rotateScale(MAJOR,2),\r\n  LYDIAN: rotateScale(MAJOR,3),\r\n  MYXOLYDIAN: rotateScale(MAJOR,4),\r\n  MINOR: rotateScale(MAJOR,5),\r\n  LOCRIAN: rotateScale(MAJOR,6),\r\n  PENTA: [2, 3, 2, 2, 3],\r\n}\r\n\r\nimport { sort, check } from \"./utils\"\r\n\r\n\r\n\r\n// calculates the biggest semitone leap that is possible provided the number of remaining steps\r\nexport const biggestSemitoneLeap = (steps = SCALE_SIZE_IN_STEPS.WESTERN, currentCount = 0, octave = SEMITONES_IN_OCTAVE) => {\r\n  return (octave-currentCount) - steps + 1;\r\n}\r\n\r\n// generates a random semitone pattern that equal 12\r\nexport const generateSemitonePattern = (length = SCALE_SIZE_IN_STEPS.WESTERN, octave = SEMITONES_IN_OCTAVE) => {\r\n  let scale = new Array(length).fill(1);\r\n  while(sum(scale) < octave) {\r\n    scale = scale.map(v=> {\r\n    return  check(0.5) ? v+1 : v;\r\n    })\r\n  }\r\n  return refit(scale);\r\n}\r\n\r\nexport const refit = (scale, octave = SEMITONES_IN_OCTAVE) => {\r\n  var selector = 0;\r\n  while(sum(scale) != octave) {\r\n    selector = Math.floor(Math.random()*scale.length);\r\n    if(scale[selector] > 1) {\r\n      sum(scale) > octave ? scale[selector]-- : scale[selector]++;\r\n    }\r\n  }\r\n  return scale;\r\n}\r\n\r\nexport const generate = (semitones, rootNote = MIDI_MIDDLE_C, range = DEFAULT_SCALE_RANGE) => {\r\n    let notes = [];\r\n    for (let i = 0; i < range; i++) {\r\n      notes.push(rootNote);\r\n      const inc = semitones[i % semitones.length];\r\n      rootNote += inc;\r\n    }\r\n    return notes; \r\n  }; \r\n\r\nexport const sum = scale => scale.reduce((a, v) => a + v);\r\n\r\nexport const fitsOctave = (scale) => sum(scale)%SEMITONES_IN_OCTAVE === 0;\r\n\r\nexport const octaveRemainder = (scale) => sum(scale)%SEMITONES_IN_OCTAVE;\r\n\r\nexport const extractRawSemitonePattern = (notes) => {\r\n  let newNotes = notes.slice().sort(sort);\r\n  return newNotes.map((n,i)=>{\r\n    if(i+1 < newNotes.length) { return newNotes[i+1] - n };\r\n  }).filter((n)=>n!=undefined);\r\n}\r\n\r\nexport const reconstructScale = (notes) => {\r\n\r\n}\r\n\r\nexport const transposeNotes = (notes, amountInSemitones) => {\r\n    let newNotes = notes.slice();\r\n    return newNotes.map((n)=>transpose(n, amountInSemitones)); \r\n}\r\n\r\nexport const transpose = (note, amount) => {\r\n  return note + amount;\r\n}","import {\r\n    check\r\n} from \"./utils\";\r\n\r\nimport {\r\n    DEFAULT_PATTERN_LENGTH\r\n} from \"./constants\"\r\n\r\nexport const generate = (notes, pattern, length = DEFAULT_PATTERN_LENGTH) => {\r\n    let sequence = new Array(length).fill(null);\r\n    let index = -1;\r\n    return sequence.map((n, i) => {\r\n        let beat = i / length;\r\n        let gen = Math.random();\r\n        if (gen > beat) {\r\n            index++;\r\n        } else if (gen < 0.33333) {\r\n            index--;\r\n        } else {\r\n            index = getRandom(notes);\r\n        }\r\n        if (index < 0) {\r\n            index += notes.length;\r\n        }\r\n        return pattern[i % pattern.length] ?\r\n            notes[index % notes.length] :\r\n            null;\r\n    });\r\n}\r\n\r\nexport const filterRandomNotes = (notes, probability = 0.5) => {\r\n    return notes.filter(n => check(probability));\r\n}\r\n\r\nexport const randomNote = (notes) => {\r\n    var randomIndex = Math.floor(Math.random() * notes.length)\r\n    return notes[randomIndex];\r\n}\r\n\r\nexport const mutatePattern = (pattern, notes) => {\r\n    let newPattern = pattern.slice();\r\n    newPattern.map((n, i) => {\r\n        return check(i / newPattern.length) ?\r\n            newPattern[i] :\r\n            notes[Math.floor(Math.random() * notes.length)];\r\n    });\r\n    return newPattern;\r\n};","import {\r\n  check\r\n} from \"./utils\";\r\n\r\nexport const generate = (beats = 4, measure = 4) => {\r\n  let sequence = new Array(beats * measure).fill(0);\r\n  sequence.map((n, i) => {\r\n    let pulse = 1 / ((i % beats) + 1);\r\n    sequence[i] = check(pulse);\r\n  });\r\n  return sequence;\r\n};\r\n\r\nexport const syncopate = (rhythm) => {\r\n  let newRythm = rhythm.slice();\r\n  newRythm.map((v) => {\r\n    return v ? !v : check(Math.random())\r\n  })\r\n\r\n}","import { check, countValue } from \"./utils\";\r\nimport * as chord from \"./chord\";\r\nimport * as utils from \"./utils\";\r\nimport * as scales  from \"./scale\";\r\nimport * as rhythm from \"./rhythm\";\r\nimport {SEMITONES_IN_OCTAVE, SONG_PARTS, MAJOR, BEATS, MEASURES, CHORD_PROGRESSIONS} from \"./constants\";\r\n\r\nexport const scale = (rootNote = 60, octaves = 2, pattern = MAJOR) =>{\r\n  return scales.generate(pattern, rootNote, SEMITONES_IN_OCTAVE*octaves);\r\n}\r\n\r\nexport const progression = (s = scale()) => {\r\n  let progs = Object.keys(CHORD_PROGREsSSIONS);\r\n  let prog =  CHORD_PROGRESSIONS[utils.getRandom(progs)];\r\n  let chords = chord.fromScale(s);\r\n\r\n  return prog.map((v)=>chords[v]);\r\n}\r\n\r\nexport const song = (\r\n  s = scale(),\r\n  beats = BEATS,\r\n  measure = MEASURES,\r\n  parts = SONG_PARTS\r\n) => {\r\n  let melodicStructure = rhythm.generate(beats, measure);\r\n  let counterrhythm = rhythm.syncopate(melodicStructure);\r\n\r\n  let partkeys= Object.keys(parts);\r\n\r\n  let chordsA = progression(s);\r\n  let bassA = chord.bassNote(chordsA);\r\n\r\n  let noteCount = countValue(melodicStructure, true); \r\n\r\n  let length = beats * measure;\r\n  let melodyNotes = pickMelodyNotes(scale);\r\n\r\n  let seqA = melody.generate(melodyNotes, length, melodicStructure);\r\n  let seqB = melody.generate(melodyNotes, length, melodicStructure);\r\n  let melodyNotes2 = pickMelodyNotes(s);\r\n  let seqC = melody.generate(melodyNotes2, length * 4, melodicStructure, -5);\r\n\r\n  return []\r\n};\r\n\r\nexport const part = ({ chords, bass, rhythm}) => {\r\n  return [1]\r\n}","import * as chord from \"./chord\";\r\nimport * as scale from \"./scale\"; \r\nimport * as melody from \"./melody\"; \r\nimport * as utils from \"./utils\";\r\nimport * as rhythm from \"./rhythm\"\r\nimport * as make from \"./generator\";\r\n\r\nimport { SCALE_PATTERNS } from \"./scale\";\r\n\r\nimport {\r\n    CHORD_SEMITONE_PATTERNS,\r\n    CHORD_SCALE_PATTERNS,\r\n    SEMITONES_IN_OCTAVE,\r\n    MIDI_MIDDLE_C,\r\n    DEFAULT_SCALE_RANGE,\r\n    MAJOR,\r\n    SCALE_SIZE_IN_STEPS,\r\n    SONG_PARTS\r\n} from \"./constants\";\r\n\r\nexport {\r\n    make,\r\n    chord, \r\n    scale, \r\n    utils, \r\n    melody,\r\n    rhythm,\r\n    CHORD_SEMITONE_PATTERNS,\r\n    CHORD_SCALE_PATTERNS,\r\n    SEMITONES_IN_OCTAVE,\r\n    MIDI_MIDDLE_C,\r\n    DEFAULT_SCALE_RANGE,\r\n    MAJOR,\r\n    SCALE_SIZE_IN_STEPS,\r\n    SONG_PARTS,\r\n    SCALE_PATTERNS\r\n};"],"sourceRoot":""}